<div class="post-form-container">
    <%= form_with model: @post, url: posts_path, method: :post, local: true do |f| %>
    <div class="image-section" data-controller="image-preview">
        <div class="image-card">
            <div class="image-placeholder" data-image-preview-target="placeholder">
            <span class="image-icon">­Ъќ╝</span>
            </div>
            <img data-image-preview-target="preview" alt="preview" style="display:none; max-width:100%; height:auto; border-radius:12px;" />
        </div>
        <br>
        <br>
        <div class="slider-row">
            <span class="icon-dim">1</span>
            <%= f.range_field :brightness_level, min: 0, max: 100, value: @post.brightness_level || 50, class: "brightness-input" %>
            <span class="icon-bright">100</span>
        </div>

        <div class="upload-actions">
            <label class="upload-button">
            ућ╗тЃЈсѓбсЃЃсЃЌсЃГсЃ╝сЃЅ
            <%= f.file_field :image,
                accept: "image/*",
                class: "hidden-file-input",
                data: { image_preview_target: "input", action: "change->image-preview#show" } %>
            </label>
        </div>
    </div>

    <div class="title-section">
        <label class="title-label">сѓ┐сѓцсЃѕсЃФ</label>
        <%= f.text_field :title, class: "title-textarea" %>
    </div>


    <div class="body-section">
        <label class="body-label">ТіЋуе┐тєЁт«╣</label>
        <%= f.text_area :body, rows: 10, class: "body-textarea" %>
    </div>

    <div class="tags-area">
        <div data-controller="tags" class="tags-section">
            <label class="tags-label">сѓ┐сѓ░(сѓФсЃ│сЃътї║тѕЄсѓісЂДУ┐йтіасђЂEnterсЂДсѓѓтЈ»)</label>
            <input type="text"
                class="tags-text"
                placeholder="СЙІ: сѓФсѓИсЃЦсѓбсЃФ, тцЈ, уЎй"
                data-tags-target="input"
                data-action="keydown->tags#handleKeydown" />
            <button type="button" class="tags-add-button" data-action="click->tags#add">У┐йтіа</button>

            <div class="tags-preview" data-tags-target="list"></div>

            <%= hidden_field_tag 'post[tag_names]', '',
                data: { tags_target: 'hidden' } %>
        </div>
    </div>

    <div class="category-area">
        <div class="category-header">
            <span class="category-title">сѓФсЃєсѓ┤сЃф</span>
        </div>
        <div class="category-list">
            <%= f.collection_check_boxes :category_ids, @categories, :id, :name do |b| %>
                <label class="category-chip">
                    <%= b.check_box class: "category-checkbox" %>
                    <span class="category-pill"><%= b.text %></span>
                </label>
            <% end %>
        </div>
    </div>

    <div class="category-area">
        <div class="category-header">
            <span class="category-title">жфеТа╝</span>
        </div>
        <div class="category-list">
            <% User.style_categories.each_key do |key| %>
                <label class="category-chip">
                    <%= f.radio_button :style_category, key, class: "category-checkbox" %>
                    <span class="category-pill">
                        <%= enum_display_name(@post, :style_category, key) %>
                    </span>
                </label>
            <% end %>
        </div>
    </div>

    <div class="category-area">
        <div class="category-header">
            <span class="category-title">У║ФжЋи</span>
        </div>
        <div class="category-list">
            <% User.height_ranges.each_key do |key| %>
                <label class="category-chip">
                    <%= f.radio_button :height_range, key, class: "category-checkbox" %>
                    <span class="category-pill">
                        <%= enum_display_name(@post, :height_range, key) %>
                    </span>
                </label>
            <% end %>
        </div>
    </div>

    <div class="form-actions">
        <%= f.submit "ТіЋуе┐", class: "primary-button" %>
    </div>
    <% end %>
</div>
